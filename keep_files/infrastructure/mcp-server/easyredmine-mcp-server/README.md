# EasyRedmine MCP Server

MCP сервер для интеграции с EasyRedmine, позволяющий получать информацию о проектах, сотрудниках, часах и задачах.

## Возможности

- **Проекты**: получение списка проектов, информации о конкретном проекте
- **Пользователи**: получение списка сотрудников, информации о конкретном пользователе
- **Временные записи**: получение часов работы с фильтрацией по пользователю, проекту и датам
- **Задачи**: получение списка задач, информации о конкретной задаче
- **Статистика**: получение статистики по часам пользователей и проектов

## Установка

1. Перейдите в директорию сервера:
```bash
cd infrastructure/mcp-server/easyredmine-mcp-server
```

2. Установите зависимости:
```bash
npm install
```

3. Соберите проект:
```bash
npm run build
```

## Конфигурация

Настройки EasyRedmine находятся в файле `config.ts`:

```typescript
export const config = {
  easyredmine: {
    url: 'https://easyredmine.awara.pro',
    apiKey: '763c9fa14fcc0343773389494e8ba3004ef3cd65'
  }
};
```

## Запуск

```bash
npm run start:easyredmine
```

## Настройка в Cursor

Добавьте следующую конфигурацию в настройки MCP Cursor:

```json
{
  "mcpServers": {
    "easyredmine": {
      "command": "node",
      "args": ["./dist/easyredmine-index.js"],
      "env": {},
      "cwd": "infrastructure/mcp-server/easyredmine-mcp-server"
    }
  }
}
```

## Доступные инструменты

### Проекты
- `get_projects` - получить список всех проектов
- `get_project` - получить информацию о конкретном проекте по ID

### Пользователи
- `get_users` - получить список всех пользователей
- `get_user` - получить информацию о конкретном пользователе по ID

### Временные записи (часы)
- `get_time_entries` - получить временные записи с фильтрацией
- `get_user_time_entries` - получить временные записи конкретного пользователя
- `get_project_time_entries` - получить временные записи конкретного проекта

### Задачи
- `get_issues` - получить список всех задач
- `get_issue` - получить информацию о конкретной задаче по ID
- `get_project_issues` - получить задачи конкретного проекта
- `get_user_issues` - получить задачи, назначенные конкретному пользователю

### Статистика
- `get_user_hours_stats` - получить статистику часов пользователя
- `get_project_hours_stats` - получить статистику часов проекта
- `get_database_stats` - получить общую статистику по системе

## Примеры использования

После настройки MCP сервера в Cursor вы сможете использовать команды:

- "Покажи все проекты в EasyRedmine"
- "Сколько пользователей в системе?"
- "Получи часы работы пользователя с ID 123"
- "Покажи задачи проекта с ID 456"
- "Какая статистика по часам за последний месяц?"

## Параметры фильтрации

### Временные записи
- `userId` - ID пользователя
- `projectId` - ID проекта
- `from` - дата начала периода (YYYY-MM-DD)
- `to` - дата окончания периода (YYYY-MM-DD)

### Задачи
- `projectId` - ID проекта
- `assignedToId` - ID назначенного пользователя
- `statusId` - ID статуса

### Пагинация
- `limit` - максимальное количество записей (по умолчанию 100)
- `offset` - смещение для пагинации (по умолчанию 0)

## Структура проекта

```
easyredmine-mcp-server/
├── src/
│   ├── types.ts              # TypeScript типы
│   ├── easyredmine-api.ts    # API клиент для EasyRedmine
│   └── easyredmine-index.ts  # Основной MCP сервер
├── config.ts                 # Конфигурация
├── package.json             # Зависимости и скрипты
├── tsconfig.json           # Конфигурация TypeScript
└── README.md               # Документация
```

## Требования

- Node.js 18+
- TypeScript 5.0+
- Доступ к EasyRedmine API

## Поддержка

При возникновении проблем проверьте:
1. Правильность URL и API ключа в `config.ts`
2. Доступность EasyRedmine сервера
3. Права доступа API ключа
4. Логи MCP сервера в консоли Cursor
